const actionBar=$(".question-header .action-right"),actionsBase=actionBar.html();let modal=$("#editModal"),span=$(".close");function btnLoad(t,e){t.html('<i class="material-icons material-spin">refresh</i>'+e).attr("disabled",!0)}function resolvedQuestion(){if(confirm("Voulez-vous vraiment marquer cette question comme résolue ?")){const t=$(".box .resolved");t.html();btnLoad(t,"Modification de l'état..."),t.parent("form").submit()}}function answerQuestion(){if(tinymce.get("newComment").getContent().length<1)alert("Vous devez entrer une réponse.");else{const t=$(".box .answer");btnLoad(t,"Envoi de la réponse..."),t.parent("form").submit()}}function publishQuestion(){const t=$(".box .publish");btnLoad(t,"Publication de la question..."),t.parent("form").submit()}function editQuestion(){const t=$(".question-content").html();$(".question-right").hide(),$("#edit").show(),$("#editTitle").show(),$(".question-content").html('<textarea id="editDescription" class="tinyedit">'+t+"</textarea>"),tinyReload()}function saveEditQuestion(){const t=$("#editButton");btnLoad(t,"Enregistrement en cours..."),$("#editTitleField").val($("#editTitle").val()),$("#editDescriptionField").val(tinymce.get("editDescription").getContent()),t.parent("form").submit()}function editComment(){let t=$(this).data("id");$("#editForm").attr("action","/q/comment/"+t+"/edit"),tinymce.get("editCommentContent").setContent($("#commentContent-"+t).html()),modal.show()}function deleteQuestion(t){if(t.preventDefault(),confirm("Voulez-vous vraiment supprimer la question ? Cette action est irréversible.")){const t=$(".question-right .delete");btnLoad($(".question-right"),"Suppression de la question..."),window.location.replace(t.parent().attr("href"))}}function deleteComment(t){t.preventDefault();const e=$(this);btnLoad(e.parent().parent(),"Suppression..."),window.location.replace(e.parent().attr("href"))}function tinyReload(){tinymce.remove(),$.getScript("/assets/js/global/tinymce.js")}span.click(()=>{modal.hide()}),$(".question-content a, .comment-content a").each((t,e)=>{$(e).attr("target","_blank")}),$(".box .resolved").on("click",resolvedQuestion),$(".box .answer").on("click",answerQuestion),$(".box .publish").on("click",publishQuestion),$(".question-header .edit").on("click",editQuestion),$(".question-header .delete").on("click",deleteQuestion),$("#editButton").on("click",saveEditQuestion),$(".comment .edit").on("click",editComment),$(".comment .delete").on("click",deleteComment);